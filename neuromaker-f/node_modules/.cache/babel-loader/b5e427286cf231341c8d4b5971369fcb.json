{"ast":null,"code":"var _jsxFileName = \"/home/Cristian/NeuroMaker/neuromaker-f/src/componentes/loginClient.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { Button, FormGroup, Input } from 'reactstrap';\nimport '../estilos/loginClient.css';\n\nclass LoginClient extends Component {\n  constructor(props) {\n    super(props); //console.log(props)\n\n    this.handleOnchange = input => e => {\n      this.setState({\n        [input]: e.target.value\n      });\n    };\n\n    this.state = {\n      cedula: \"\",\n      clave: \"\"\n    };\n    this.handleOnchange = this.handleOnchange.bind(this);\n    this.enviarSolicitud = this.enviarSolicitud.bind(this);\n    this.enviar = this.enviar.bind(this);\n  }\n\n  enviarSolicitud() {\n    const mensaje = {\n      cedula: this.state.cedula,\n      clave: this.state.clave\n    };\n    console.log(mensaje); //Axios se encarga de hacer solicitudes de forma sencilla\n\n    axios.post('http://localhost:4000/usuario/loginUsuario', mensaje).then(response => {\n      alert(JSON.stringify(response.data));\n\n      if (response.data.mensaje === \"Usuario encontrado\") {\n        this.props.login(true);\n        localStorage.setItem(\"token\", \"18182A2ISJ292101\");\n      }\n    });\n  }\n\n  enviar() {\n    /*\n        let esConductor = (JSON.parse(this.state.conductor));\n        if(this.state.identificador.match(\"^[0-9]+$\")!=null){\n          if(this.state.contrasena !== \"\"){\n            const input = {\n              identificador: this.state.identificador, \n              contrasena: this.state.contrasena,\n              conductor: false\n            };\n            let url = \"http://\"+ this.props.url +\":4000/login\";\n            if(esConductor){\n              input.conductor = true;\n            }\n            const opciones = {\n              method: 'POST',  \n              body: JSON.stringify(input),  \n              headers:{\n                'Content-Type': 'application/json'\n              }\n            };\n            const request = new Request(url, opciones);\n            this.setState({closedProgress: false})\n            fetch(request).then(res => res.json())\n            .then((response) => {\n    \n              this.setState({closedProgress: true})\n              console.log('Exito:', JSON.stringify(response))\n    \n              if (response.identificador) {\n                if(response.contrasena){\n                  if(esConductor){\n                    if(response.ocupado){\n                      handleClick({message: \"El taxi esta siendo usado!!\"})\n                    }else{\n                      this.props.iniciarSesion({valor: esConductor, nombre: response.nombre, id:response.id, placa: response.placa});\n                    }\n                  }else{\n                    if(response.ocupado){\n                      handleClick({message: \"La sesion ya esta iniciada\"})\n                    }else{\n                      this.props.iniciarSesion({valor: esConductor, nombre: response.nombre, id:response.id});\n                    }\n                  }            \n                }else{\n                  handleClick({message: \"Contraseña incorrecta\"})\n                }\n              }else{\n                handleClick({message: (esConductor)?\n                                      \"El Conductor no esta registrado\":\n                                      \"El Pasajero no esta registrado\"\n                                    })\n              }\n            }\n            )\n            .catch(error => {\n              console.log('Error:', error)\n              this.setState({closedProgress: true})\n              handleClick({message: \"Error de red, intentelo mas tarde\"})\n              });\n    \n          }else{\n            handleClick({message: \"La contraseña esta vacia\"})\n          }\n        }else{\n          handleClick({message: (esConductor)?\n                      \"El número de CEDULA es invalido\":\n                      \"El número de CELULAR es invalido\"\n                      })\n        } \n        */\n  }\n\n  render() {\n    if (this.props.autenticado) {\n      console.log(\"Esta logeado\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"espacio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"Bloque\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"formularioLogin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Iniciar Sesi\\xF3n\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"email\",\n      name: \"email\",\n      onChange: this.handleOnchange('cedula'),\n      placeholder: \"Cedula\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-lock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"password\",\n      name: \"password\",\n      onChange: this.handleOnchange('clave'),\n      placeholder: \"Contrasena\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"info\",\n      block: true,\n      onClick: this.enviarSolicitud,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"INGRESAR\"), ' ', React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"mensajito\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"\\xBFAun sin cuenta? \", React.createElement(Link, {\n      to: \"/registro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"registrare aqui\")))));\n  }\n\n}\n\nexport default LoginClient;","map":{"version":3,"sources":["/home/Cristian/NeuroMaker/neuromaker-f/src/componentes/loginClient.jsx"],"names":["React","Component","Link","axios","Button","FormGroup","Input","LoginClient","constructor","props","handleOnchange","input","e","setState","target","value","state","cedula","clave","bind","enviarSolicitud","enviar","mensaje","console","log","post","then","response","alert","JSON","stringify","data","login","localStorage","setItem","render","autenticado"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { Button, FormGroup, Input } from 'reactstrap';\nimport '../estilos/loginClient.css'\n\nclass LoginClient extends Component {\n    constructor(props) {\n        super(props);\n        //console.log(props)\n        this.state = {\n            cedula: \"\",\n            clave: \"\",\n        };\n        this.handleOnchange = this.handleOnchange.bind(this);\n        this.enviarSolicitud = this.enviarSolicitud.bind(this)\n        this.enviar = this.enviar.bind(this);\n\n    }\n\n\n    handleOnchange = input => e => {\n        this.setState({ [input]: e.target.value });\n    }\n\n    enviarSolicitud() {\n      const mensaje = {\n        cedula: this.state.cedula,\n        clave: this.state.clave\n        \n      }\n      console.log(mensaje)\n      \n      //Axios se encarga de hacer solicitudes de forma sencilla\n      axios.post('http://localhost:4000/usuario/loginUsuario', mensaje)\n      .then((response) => {\n        alert(JSON.stringify(response.data))\n        if(response.data.mensaje===\"Usuario encontrado\"){\n          this.props.login(true)\n          localStorage.setItem(\"token\",\"18182A2ISJ292101\");\n        }\n\n      })\n    }\n\n    \n    enviar() {\n        /*\n            let esConductor = (JSON.parse(this.state.conductor));\n            if(this.state.identificador.match(\"^[0-9]+$\")!=null){\n              if(this.state.contrasena !== \"\"){\n                const input = {\n                  identificador: this.state.identificador, \n                  contrasena: this.state.contrasena,\n                  conductor: false\n                };\n                let url = \"http://\"+ this.props.url +\":4000/login\";\n                if(esConductor){\n                  input.conductor = true;\n                }\n                const opciones = {\n                  method: 'POST',  \n                  body: JSON.stringify(input),  \n                  headers:{\n                    'Content-Type': 'application/json'\n                  }\n                };\n                const request = new Request(url, opciones);\n                this.setState({closedProgress: false})\n                fetch(request).then(res => res.json())\n                .then((response) => {\n        \n                  this.setState({closedProgress: true})\n                  console.log('Exito:', JSON.stringify(response))\n        \n                  if (response.identificador) {\n                    if(response.contrasena){\n                      if(esConductor){\n                        if(response.ocupado){\n                          handleClick({message: \"El taxi esta siendo usado!!\"})\n                        }else{\n                          this.props.iniciarSesion({valor: esConductor, nombre: response.nombre, id:response.id, placa: response.placa});\n                        }\n                      }else{\n                        if(response.ocupado){\n                          handleClick({message: \"La sesion ya esta iniciada\"})\n                        }else{\n                          this.props.iniciarSesion({valor: esConductor, nombre: response.nombre, id:response.id});\n                        }\n                      }            \n                    }else{\n                      handleClick({message: \"Contraseña incorrecta\"})\n                    }\n                  }else{\n                    handleClick({message: (esConductor)?\n                                          \"El Conductor no esta registrado\":\n                                          \"El Pasajero no esta registrado\"\n                                        })\n                  }\n                }\n                )\n                .catch(error => {\n                  console.log('Error:', error)\n                  this.setState({closedProgress: true})\n                  handleClick({message: \"Error de red, intentelo mas tarde\"})\n                  });\n        \n              }else{\n                handleClick({message: \"La contraseña esta vacia\"})\n              }\n            }else{\n              handleClick({message: (esConductor)?\n                          \"El número de CEDULA es invalido\":\n                          \"El número de CELULAR es invalido\"\n                          })\n            } \n            */\n    }\n\n    render() {\n        if (this.props.autenticado) {\n            console.log(\"Esta logeado\")\n\n        }\n        return (\n            <div>\n                <div id=\"espacio\" />\n                <div className=\"Bloque\">\n                    <div className=\"card-heading\">\n                        {/*<div id=\"mundo\" />\n                        <div id=\"taxi\" />*/}\n                    </div>\n                    <div id=\"formularioLogin\">\n                        <h2>Iniciar Sesión</h2>\n                        <br />\n                        <FormGroup>\n                        <i className=\"fa fa-user\"></i>\n                            <Input type=\"email\" name=\"email\"\n                                onChange={this.handleOnchange('cedula')}\n                                placeholder=\"Cedula\" \n                                />\n\n                        </FormGroup>\n                        <br />\n                        <FormGroup>\n                        <i className=\"fa fa-lock\"></i>\n                            <Input type=\"password\" name=\"password\"\n                                onChange={this.handleOnchange('clave')}\n                                placeholder=\"Contrasena\" />\n\n                        </FormGroup>\n                        <br />\n                        <Button color=\"info\" block onClick={this.enviarSolicitud}>INGRESAR</Button>{' '}\n\n                        <br /><br />\n                        <span className=\"mensajito\">¿Aun sin cuenta? <Link to={\"/registro\"} >registrare aqui</Link></span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default LoginClient;"]},"metadata":{},"sourceType":"module"}